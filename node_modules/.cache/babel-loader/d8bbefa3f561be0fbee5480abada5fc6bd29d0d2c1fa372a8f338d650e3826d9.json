{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./WeatherDashboard.css\";// TODO: Replace with your OpenWeatherMap API key\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_KEY=\"f968c650ac649b1d46ee70246f938efa\";const BASE_URL=\"https://api.openweathermap.org/data/2.5\";const WeatherDashboard=()=>{const[weather,setWeather]=useState(null);const[forecast,setForecast]=useState(null);const[city,setCity]=useState(\"\");const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");const[unit,setUnit]=useState(\"metric\");// 'metric' for Celsius, 'imperial' for Fahrenheit\nuseEffect(()=>{// Load last searched city from localStorage\nconst savedCity=localStorage.getItem(\"lastSearchedCity\");if(savedCity){fetchWeather(savedCity);}},[unit]);const fetchWeather=async cityName=>{if(!API_KEY||API_KEY===\"YOUR_OPENWEATHERMAP_API_KEY\"){setError(\"Please set up your OpenWeatherMap API key\");return;}setLoading(true);setError(\"\");try{// Fetch current weather\nconst weatherResponse=await axios.get(`${BASE_URL}/weather?q=${cityName}&appid=${API_KEY}&units=${unit}`);// Fetch 5-day forecast\nconst forecastResponse=await axios.get(`${BASE_URL}/forecast?q=${cityName}&appid=${API_KEY}&units=${unit}`);setWeather(weatherResponse.data);setForecast(forecastResponse.data);localStorage.setItem(\"lastSearchedCity\",cityName);}catch(err){var _err$response,_err$response2;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===404){setError(\"City not found. Please check the spelling and try again.\");}else if(((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===401){setError(\"Invalid API key. Please check your configuration.\");}else{setError(\"Unable to fetch weather data. Please try again later.\");}}finally{setLoading(false);}};const handleSearch=e=>{e.preventDefault();if(city.trim()){fetchWeather(city.trim());}};const getCurrentLocation=()=>{if(!navigator.geolocation){setError(\"Geolocation is not supported by this browser\");return;}setLoading(true);setError(\"\");navigator.geolocation.getCurrentPosition(async position=>{try{const{latitude,longitude}=position.coords;const response=await axios.get(`${BASE_URL}/weather?lat=${latitude}&lon=${longitude}&appid=${API_KEY}&units=${unit}`);const forecastResponse=await axios.get(`${BASE_URL}/forecast?lat=${latitude}&lon=${longitude}&appid=${API_KEY}&units=${unit}`);setWeather(response.data);setForecast(forecastResponse.data);setCity(response.data.name);localStorage.setItem(\"lastSearchedCity\",response.data.name);}catch(err){setError(\"Unable to fetch weather for your location\");}finally{setLoading(false);}},error=>{setLoading(false);let errorMessage=\"Unable to get your location. \";switch(error.code){case error.PERMISSION_DENIED:errorMessage+=\"Please allow location access.\";break;case error.POSITION_UNAVAILABLE:errorMessage+=\"Location information unavailable.\";break;case error.TIMEOUT:errorMessage+=\"Location request timed out.\";break;default:errorMessage+=\"An unknown error occurred.\";break;}setError(errorMessage);});};const toggleUnit=newUnit=>{if(unit!==newUnit){setUnit(newUnit);}};const formatDate=timestamp=>{return new Date(timestamp*1000).toLocaleDateString(\"en-US\",{weekday:\"short\",month:\"short\",day:\"numeric\"});};const formatTime=timestamp=>{return new Date(timestamp*1000).toLocaleTimeString(\"en-US\",{hour:\"numeric\",hour12:true});};const getDailyForecast=()=>{if(!forecast)return[];const dailyData={};forecast.list.forEach(item=>{const date=new Date(item.dt*1000).toDateString();if(!dailyData[date]){dailyData[date]={...item,temp_max:item.main.temp_max,temp_min:item.main.temp_min};}else{if(item.main.temp_max>dailyData[date].temp_max){dailyData[date].temp_max=item.main.temp_max;}if(item.main.temp_min<dailyData[date].temp_min){dailyData[date].temp_min=item.main.temp_min;}}});return Object.values(dailyData).slice(0,5);};const getHourlyForecast=()=>{if(!forecast)return[];return forecast.list.slice(0,8);// Next 24 hours (8 x 3-hour intervals)\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"weather-dashboard\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-cloud-sun\"}),\" Weather Dashboard\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Get real-time weather information for any city\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-section\",children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSearch,className:\"search-form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:city,onChange:e=>setCity(e.target.value),placeholder:\"Enter city name...\",className:\"search-input\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"search-btn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"}),\" Search\"]})]})}),/*#__PURE__*/_jsxs(\"button\",{onClick:getCurrentLocation,className:\"location-btn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-location-arrow\"}),\" Use Current Location\"]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"loading-spinner\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin\"}),\" Loading...\"]}),weather&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"weather-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"current-weather\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"weather-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"weather-info\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[weather.name,\", \",weather.sys.country]}),/*#__PURE__*/_jsx(\"p\",{children:new Date().toLocaleDateString(\"en-US\",{weekday:\"long\",year:\"numeric\",month:\"long\",day:\"numeric\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"temperature\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"temp\",children:[Math.round(weather.main.temp),\"\\xB0\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"temp-unit\",children:[/*#__PURE__*/_jsx(\"button\",{className:unit===\"metric\"?\"unit-btn active\":\"unit-btn\",onClick:()=>toggleUnit(\"metric\"),children:\"\\xB0C\"}),/*#__PURE__*/_jsx(\"button\",{className:unit===\"imperial\"?\"unit-btn active\":\"unit-btn\",onClick:()=>toggleUnit(\"imperial\"),children:\"\\xB0F\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"description\",children:weather.weather[0].description})]}),/*#__PURE__*/_jsx(\"div\",{className:\"weather-icon\",children:/*#__PURE__*/_jsx(\"img\",{src:`https://openweathermap.org/img/wn/${weather.weather[0].icon}@4x.png`,alt:weather.weather[0].description})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"weather-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-eye\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Visibility\"}),/*#__PURE__*/_jsxs(\"span\",{children:[(weather.visibility/1000).toFixed(1),\" km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tint\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Humidity\"}),/*#__PURE__*/_jsxs(\"span\",{children:[weather.main.humidity,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-wind\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Wind Speed\"}),/*#__PURE__*/_jsxs(\"span\",{children:[weather.wind.speed,\" \",unit===\"metric\"?\"m/s\":\"mph\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-thermometer-half\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Feels Like\"}),/*#__PURE__*/_jsxs(\"span\",{children:[Math.round(weather.main.feels_like),\"\\xB0\",unit===\"metric\"?\"C\":\"F\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-compress-arrows-alt\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Pressure\"}),/*#__PURE__*/_jsxs(\"span\",{children:[weather.main.pressure,\" hPa\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sun\"}),/*#__PURE__*/_jsx(\"span\",{children:\"UV Index\"}),/*#__PURE__*/_jsx(\"span\",{children:\"N/A\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-calendar-alt\"}),\" 5-Day Forecast\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-container\",children:getDailyForecast().map((day,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"forecast-date\",children:formatDate(day.dt)}),/*#__PURE__*/_jsx(\"img\",{className:\"forecast-icon\",src:`https://openweathermap.org/img/wn/${day.weather[0].icon}@2x.png`,alt:day.weather[0].description}),/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-temps\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"forecast-high\",children:[Math.round(day.temp_max),\"\\xB0\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"forecast-low\",children:[Math.round(day.temp_min),\"\\xB0\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-desc\",children:day.weather[0].description})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hourly-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clock\"}),\" Hourly Forecast\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"hourly-container\",children:getHourlyForecast().map((hour,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"hourly-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hourly-time\",children:formatTime(hour.dt)}),/*#__PURE__*/_jsx(\"img\",{className:\"hourly-icon\",src:`https://openweathermap.org/img/wn/${hour.weather[0].icon}.png`,alt:hour.weather[0].description}),/*#__PURE__*/_jsxs(\"div\",{className:\"hourly-temp\",children:[Math.round(hour.main.temp),\"\\xB0\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"hourly-desc\",children:hour.weather[0].description})]},index))})]})]})]});};export default WeatherDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}